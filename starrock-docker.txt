1. Create project folder					
	mkdir starrocks-gcs				
	cd starrocks-gcs				
					
					
2. Dockerfile					
	FROM starrocks/allin1-ubuntu:3.5-latest				
					
	# gcloud SDK 				
	RUN apt-get update && apt-get install -y curl apt-transport-https ca-certificates gnupg && \				
	    echo "deb [signed-by=/usr/share/keyrings/cloud.google.gpg] https://packages.cloud.google.com/apt cloud-sdk main" \				
	        | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list && \				
	    curl https://packages.cloud.google.com/apt/doc/apt-key.gpg \				
	        | gpg --dearmor -o /usr/share/keyrings/cloud.google.gpg && \				
	    apt-get update && apt-get install -y google-cloud-sdk && \				
	    apt-get clean				
					
				
	WORKDIR /data/deploy				
					
3. Build images					
	docker build -t starrocks-gcs .				
					
4. Run container and service account:				
	Let's say your JSON service account is located at: C:\Users\PC\Downloads\annoying-puzzle.json
					
	docker run -d \				
	  --name starrocks-gcs \				
	  -p 8030:8030 \				
	  -p 8040:8040 \				
	  -p 9050:9050 \				
	  -v C:/Users/PC/Downloads/annoying-puzzle.json:/root/key.json \				
	  starrocks-gcs				
					
5. Configure permissions in the container:
	docker exec -it starrocks-gcs bash				
	gcloud auth activate-service-account --key-file=/root/key.json				
	gcloud config set project $(cat /root/key.json | grep project_id | cut -d '"' -f4)				
					
6. Test connector:					
	curl -I https://storage.googleapis.com				
	gcloud storage ls gs://annoying-puzzle-export-demo 				
					
7. Demo Create External Tables in Starrocks:					
	CREATE EXTERNAL TABLE ext_transformed_events3 (				
	event_date STRING,				
	event_timestamp DATETIME,				
	event_name STRING,				
	user_pseudo_id STRING,				
	event_params STRING,				
	user_properties STRING,				
	geo STRING,				
	device STRING,				
	app_info STRING,				
	platform STRING,				
	traffic_source STRING,				
	event_value_in_usd DOUBLE,				
	retention_day INT				
	)				
	ENGINE=FILE				
	PROPERTIES (				
	"path" = "gs://brain-puzzle-tricky-test-export-demo/transform/",				
	"format" = "parquet",				
	"gcp.gcs.service_account_email" = "XXX",				
	"gcp.gcs.service_account_private_key_id" = "YYY",				
	"gcp.gcs.service_account_private_key" = "ZZZ"				
	);				
					
					
					
	SELECT event_date from ext_transformed_events10;				
					
					
					
					
					
					
					
					
					
					